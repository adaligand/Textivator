<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consonator</title>
  <style>
    .container {
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
      font-size: 16px; /* Adjust font size as needed */
      font-family: Arial, sans-serif; /* Adjust font family as needed */
    }

    textarea {
      width: 100%;
      height: 150px;
      margin-bottom: 10px;
      border-radius: 5px;

    }
 button {
      padding: 10px 20px;
      background-color: #f9f9f9;
      border: 2px solid #ccc;
      color: #000000;
       font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: #A9A9A9;
      transform: translateY(-4px);
    }
    .hide {
      display: none;
    }

    #exerciseOutput {
      font-size: 18px;
      line-height: 2;
      text-align: justify;
      word-spacing: 0.5em; /* Adjust word spacing as needed */
    }

    input {
      width: 13px; /* Adjust the width as needed */
      text-align: center;
      border: none;
      border-left: transparent;
      border-right: transparent;
      border-top: transparent;
      border-bottom: 1px solid black;
      border-bottom-width: 0.5px; /* Adjust the thickness of the bottom border */
      transition: border 0.3s;
      font-size: inherit;
      font-family: inherit;
      margin-right: 2px; /* Add a small gap between adjacent textboxes */
    }

    input:focus {
      outline: none;
      border: none;
      border-left: transparent;
      border-right: transparent;
      border-top: transparent;
      border-bottom: 1px solid black;
      border-bottom-width: 0.5px; /* Adjust the thickness of the bottom border */
    }

    .keyboard-container {
      margin-top: 20px;
      text-align: center; /* Center the text horizontally */
    }

    /* Updated keyboard button styles */
    .keyboard-button {
      font-size: 18px;
      padding: 10px 15px;
      margin: 2px;
      border: none;
      border-radius: 10px;
      background-color: #10148; /* Medium dark grey background */
      color: #000000; /* White text */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Add shadow for volume */
      transition: background-color 0.3s, transform 0.2s;
    }
.subtitle {
  font-size: 16px;
  margin-bottom: 10px;
  }
    .keyboard-button:hover {
      background-color: #A9A9A9; /* Slightly darker grey background on hover */
      transform: translateY(-4px); /* Add slight lift effect on hover */
    }
#footer {
  position: fixed;
  bottom: 0;
  width: 100%;
   text-align: center;
  padding: 10px 0;
  font-weight: bold;
  font-size: 12px;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: Arial, sans-serif;
}
    @media screen {
      .print-title-container {
        display: none;
      }

      .on-screen-title {
        font-size: 40px;
        font-weight: bold;
        text-align: center;
      }

      .screen-title {
        display: none;
      }
    }

    @media print {
      .keyboard-container,
      button,
      #embeddedPage,
      .on-screen-title,
      .screen-title,
      .keyboard-container {
        display: none !important;
      }

      .print-title {
        font-size: 16px;
        font-weight: bold;
        text-align: center;
      }
 /* Hide the subtitle */
  .subtitle {
    display: none !important;
  }
      #exerciseOutput {
        display: block !important;
      }

      .container {
        padding: 0 !important;
      }
    }
#footer {
    position: relative;
    box-shadow: none;
    background-color: transparent;
    font-weight: bold;
  }
}
  </style>
</head>
<body onload="initialize()">
  <!-- Print title container -->
  
  <div class="print-title-container">
    <div class="print-title">Fill in the text with the missing consonants</div>
  </div>

  <!-- On-screen title container -->
  <div class="container">
    <button id="homeButton" onclick="goHome()">Home</button>
    <div class="on-screen-title">Consonator</div>
    <br><br>
     <div class="subtitle" id="subtitle">Missing consonants :Type or copy/paste your text and click on Generate exercise.</div>
    <div class="screen-title">Fill in the text with the missing consonants</div>
     <br><br>
    <textarea id="textInput" placeholder="Enter your text here..." oninput="toggleCheckButtonVisibility()"></textarea>
    <button onclick="generateExercise()">Generate Exercise</button>
    <button id="checkButton" class="hide" onclick="checkExercise()">Check Exercise</button>
    <button id="resetButton" class="hide" onclick="resetActivity()">Reset</button>
    <div id="exerciseOutput" class="hide"></div>
    <div id="feedback" class="hide"></div>
  </div>
  <!-- Keyboard container -->
  <div class="keyboard-container">
    <button class="keyboard-button" onclick="insertLetter('√ß')">√ß</button>
    <button class="keyboard-button" onclick="insertLetter('√±')">√±</button>
    <button class="keyboard-button" onclick="insertLetter('√ü')">√ü</button>
  </div>
<!-- Footer at the bottom -->
<div id="footer">
  <span>Ô∏èüåç A Daligand</span>
</div>
  <script>
    var focusedInput; // Variable to keep track of the currently focused input element
  var correctAnswers = 0; // Variable to keep track of the correct answers

  function initialize() {
    document.getElementById('textInput').value = '';
  }

  function generateExercise() {
    var textInput = document.getElementById('textInput').value;
    var modifiedText = '';

    for (var i = 0; i < textInput.length; i++) {
      var char = textInput[i];
      if (isConsonant(char)) {
        modifiedText += '<input type="text" maxlength="1" size="1" value="" data-original="' + char + '" oninput="moveToNext(this)" onkeydown="handleBackspace(this, event)" onkeydown="handleEnter(this, event)">';
      } else {
        modifiedText += char;
      }
    }

    var exerciseOutput = document.getElementById('exerciseOutput');
    exerciseOutput.innerHTML = modifiedText;
    exerciseOutput.classList.remove('hide');

    // Attach event listeners to each input box
    var inputs = exerciseOutput.querySelectorAll('input');
    inputs.forEach(function(input) {
      input.addEventListener('input', function() {
        moveToNext(this);
      });
      input.addEventListener('keydown', function(event) {
        handleBackspace(this, event);
        handleEnter(this, event);
      });
    });

    document.getElementById('textInput').classList.add('hide');
    
    // Show the "Check Exercise" button
    document.getElementById('checkButton').classList.remove('hide');
   // Hide the subtitle
    var subtitle = document.getElementById('subtitle');
    subtitle.classList.add('hide');
    // Focus on the first input box
    var firstInput = exerciseOutput.querySelector('input');
    if (firstInput) {
      firstInput.focus();
    }
  }

    function toggleCheckButtonVisibility() {
      var textInput = document.getElementById('textInput').value;
      var checkButton = document.getElementById('checkButton');
      if (textInput.trim() !== '') {
        checkButton.classList.add('hide');
      }
    }

  function insertLetter(letter) {
    if (focusedInput) {
      focusedInput.value = letter;
      moveToNext(focusedInput);
    }
  }

  document.addEventListener('focusin', function(event) {
    if (event.target.tagName.toLowerCase() === 'input') {
      focusedInput = event.target;
    }
  });

  function handleBackspace(input, event) {
    if (event.key === 'Backspace' && input.value.length === 0) {
      var prevInput = input.previousElementSibling;
      if (prevInput && prevInput.tagName === 'INPUT') {
        prevInput.focus();
      }
    }
  }

  function isConsonant(char) {
    // Remove accents from the character and then check if it's a consonant
    var normalizedChar = char.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    return /^[bcdfghjklmnpqrstvwxyz√ßBCDFGHJKLMNPQRSTVWXYZ√á√ë√±√ü]$/.test(normalizedChar);
  }

  function moveToNext(input) {
    if (input.value.length >= 1) {
      var nextInput = input.nextElementSibling;
      if (nextInput && nextInput.tagName === 'INPUT') {
        nextInput.focus();
      }
    }
  }

  function handleEnter(input, event) {
    if (event.key === 'Enter') {
      checkExercise();
    }
  }

    function checkExercise() {
      var filledInputs = document.querySelectorAll('#exerciseOutput input');
      var errors = 0;

      filledInputs.forEach(function(input) {
        var userInput = input.value.trim().toLowerCase();
        var originalChar = input.dataset.original.toLowerCase();

        if (userInput !== originalChar) {
          errors++;
        } else {
          correctAnswers++; // Increment correct answers count
        }
      });

      var feedback = document.getElementById('feedback');
      var resetButton = document.getElementById('resetButton');
      if (errors === 0) {
        feedback.textContent = 'All answers are correct! Total correct answers: ' + correctAnswers;
        resetButton.classList.remove('hide');
      } else {
        feedback.textContent = 'Number of incorrect answers: ' + errors + '. Total correct answers: ' + correctAnswers;
        resetButton.classList.add('hide');
      }
      feedback.classList.remove('hide');

      // Reset correctAnswers variable to 0 after checking the exercise
      correctAnswers = 0;
    }

function resetActivity() {
  var resetButton = document.getElementById('resetButton');
  var checkButton = document.getElementById('checkButton');
  var subtitle = document.getElementById('subtitle');
  var exerciseOutput = document.getElementById('exerciseOutput');
  var feedback = document.getElementById('feedback');
  var textInput = document.getElementById('textInput');

  resetButton.classList.add('hide');
  checkButton.classList.remove('hide');
  subtitle.classList.remove('hide');
  exerciseOutput.classList.add('hide');
  feedback.classList.add('hide');
  textInput.classList.remove('hide'); // Show the text input field
  initialize();

  if (subtitle.classList.contains('hide')) {
    checkButton.classList.remove('hide'); // Show the "Check Exercise" button if the subtitle is hidden
  } else {
    checkButton.classList.add('hide'); // Hide the "Check Exercise" button if the subtitle is visible
  }
}
        function goHome() {
      window.location.href = "https://adaligand.github.io/Textivator/";
    }
  </script>
</body>
</html>
